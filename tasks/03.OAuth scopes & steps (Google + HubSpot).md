# 3 — OAuth scopes & steps (Google + HubSpot)

### Google OAuth (what to request)

When creating the OAuth client in Google Cloud Console:

#### Requested OAuth scopes:

- `openid`
- `email`
- `profile`
- Gmail:
  - `https://www.googleapis.com/auth/gmail.readonly` or `https://www.googleapis.com/auth/gmail.modify` (read/write). Since you need to send and create labels/mark read, request gmail.modify (read/write).
- Calendar:
  - `https://www.googleapis.com/auth/calendar.events` (read/write events)
  - `https://www.googleapis.com/auth/calendar.events.readonly` (if only read)
- If using push notifications via Gmail Pub/Sub, you’ll need Pub/Sub permissions set up in GCP project.

#### Exactly how to add test user webshookeng@gmail.com:

1. Create OAuth consent screen in Google Cloud Console (External).
2. In the “Test users” section, add `webshookeng@gmail.com`.
3. Save and publish to testing (still requires verification for sensitive scopes if you go beyond testing or to production).
4. Create OAuth 2.0 Client ID (type: Web application) and set redirect URIs to your app (e.g., `https://app.example.com/api/oauth/google/callback`).

Note: For development/testing, adding that email as a test user is sufficient to sign in with the app.

### HubSpot OAuth

- Create an app in HubSpot Developer Dashboard.
- Request scopes:
  - crm.objects.contacts.read
  - crm.objects.contacts.write
  - crm.objects.notes.read / crm.objects.notes.write
  - crm.schemas.contacts.read
  - crm.associations.read/write if needed
- Add redirect URI: https://app.example.com/api/oauth/hubspot/callback
- Use the HubSpot OAuth flow; user authorizes; you store refresh/access tokens.
